---
import Alert from './starwind/alert/Alert.astro';
import db from '@lib/db';

let faqs = [];
try {
  // Récupérer directement depuis la DB les FAQ des formations
  faqs = db.prepare('SELECT * FROM faq WHERE formationsGlobal = 1 ORDER BY id ASC').all();
} catch (e) {
  console.error('Error fetching formations FAQ:', e);
  faqs = [];
}
---
{faqs.length > 0 ? (
  <div class="space-y-8">
    {faqs.map((f: { question: string; reponse: string }) => (
      <div class="luxury-glass-effect p-8 rounded-2xl border border-luxury-primary/20 hover:border-luxury-primary/40 transition-all duration-500">
        <h4 class="text-lg font-medium text-luxury-primary mb-4 font-heading">{f.question}</h4>
        <p class="text-neutral-600 leading-relaxed">{f.reponse}</p>
      </div>
    ))}
  </div>
) : (
  <div class="luxury-glass-effect p-12 rounded-2xl text-center">
    <div class="text-luxury-primary/60 mb-4">✦</div>
    <p class="text-neutral-500">Plus de questions fréquentes à venir prochainement.</p>
  </div>
)}
